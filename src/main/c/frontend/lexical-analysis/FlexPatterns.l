%{

#include "FlexActions.h"

%}

/**
 * Enable start condition manipulation functions.
 */
%option stack

/**
 * Flex contexts (a.k.a. start conditions).
 *
 * @see https://westes.github.io/flex/manual/Start-Conditions.html
 */

/* %x MULTILINE_COMMENT */
%x CANA
%x CODE

/**
 * Reusable patterns.
 *
 * @see https://westes.github.io/flex/manual/Matching.html
 * @see https://westes.github.io/flex/manual/Patterns.html
 */

TEXT [][a-zA-Z0-9*@&=+$/?%#_~|<>{}()'"\\!:;.,\-]+
CANA ğŸ‘®â€â™‚ï¸
NOCANA [^ğŸ‘®â€â™‚ï¸ \n]+
CODE ğŸ’»
NOCODE [^ğŸ’» \n]+

%%

"ğŸ¤´"									{ return TitleLexemeAction(createLexicalAnalyzerContext()); }
"ğŸ‘´"									{ return Heading1LexemeAction(createLexicalAnalyzerContext()); }
"ğŸ‘¨"									{ return Heading2LexemeAction(createLexicalAnalyzerContext()); }
"ğŸ‘¶"									{ return Heading3LexemeAction(createLexicalAnalyzerContext()); }
"ğŸ‡"									{ return PageSkipLexemeAction(createLexicalAnalyzerContext()); }
"ğŸ’¥"									{ return UnorderedListLexemeAction(createLexicalAnalyzerContext()); }
"ğŸ”¢"									{ return OrderedListLexemeAction(createLexicalAnalyzerContext()); }
"ğŸ¯"                                    { return ListItemLexemeAction(createLexicalAnalyzerContext()); }
"ğŸ¤¸â€â™‚ï¸"                                    { return CellSeparatorLexemeAction(createLexicalAnalyzerContext()); }
"ğŸ“·"									{ return ImageLexemeAction(createLexicalAnalyzerContext()); }
"ğŸ‘¨â€ğŸ¦²"									   { return BoldLexemeAction(createLexicalAnalyzerContext()); }
"ğŸ¤Œ"							        { return ItalicLexemeAction(createLexicalAnalyzerContext()); }
"ğŸ“‰"                                    { return UnderlineLexemeAction(createLexicalAnalyzerContext()); }
"ğŸ“Š"                                    { return TableLexemeAction(createLexicalAnalyzerContext()); }
"ğŸ’»"                                    { BEGIN(CODE); return CodeLexemeAction(createLexicalAnalyzerContext()); }
"ğŸ‘®â€â™‚ï¸"                                    { BEGIN(CANA); return EscapedLexemeAction(createLexicalAnalyzerContext()); }

<CANA>"ğŸ‘®â€â™‚ï¸"                              { BEGIN(INITIAL); return EscapedLexemeAction(createLexicalAnalyzerContext()); }
<CANA>[\n]+                             { return StringLexemeAction(createLexicalAnalyzerContext()); }
<CANA>[ ]+						        { IgnoredLexemeAction(createLexicalAnalyzerContext()); }
<CANA>{NOCANA}                          { return StringLexemeAction(createLexicalAnalyzerContext()); }

<CODE>"ğŸ’»"                              { BEGIN(INITIAL); return CodeLexemeAction(createLexicalAnalyzerContext()); }
<CODE>[\n]+                             { return StringLexemeAction(createLexicalAnalyzerContext()); }
<CODE>[ ]+						        { IgnoredLexemeAction(createLexicalAnalyzerContext()); }
<CODE>{NOCODE}                          { return StringLexemeAction(createLexicalAnalyzerContext()); }

[[:space:]]+						    { IgnoredLexemeAction(createLexicalAnalyzerContext()); }
{TEXT}									{ return StringLexemeAction(createLexicalAnalyzerContext()); }
.                                       { return UnknownLexemeAction(createLexicalAnalyzerContext()); }

%%

#include "FlexExport.h"